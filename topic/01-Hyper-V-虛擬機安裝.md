---
id: HyperV虛擬機安裝
aliases: []
tags: []
---

# Hyper-V 虛擬機

## Hyper-V 虛擬交換器類型:

Hyper-V 虛擬交換器分3種

1. 外網:
    - host 與主機共用實體網路卡
    - host <-> 外部網路
2. 內部網路(Win10預設會建立):

-   Host <=> Client
-   Client <=> Client
-   要在 host 啟動 NAT 或路由才能對外

3. 私人網路:

-   Client <=> Client
-   無法對 host 或對外

## 初始化

-   先找出 Hyper-V
-   右邊虛擬交換器管理員:
    -   Windows 會用對外網卡建立一個對外的虛擬交換器 virtual switch
    -   Windows 10 預設是內部虛擬交換器
    -   除了實體網卡那張switch之外，其他全部刪掉
-   把虛擬機全部刪掉，會連快照一起刪掉
-   去教室的NAS找洪旭升老師的資料夾下載: Hyper-V, 投影片,筆記
-   找 `securable測試.docx` 去做一些簡單的檢測虛擬化相容性，
    -   裝之前要是 `64, Yes, Yes`

## 移除 Hyper-V

右上角 => 管理 => 移除角色及功能

## 安裝 Hyper-V

右上角 => 管理 => 新增角色及功能  
下一步=>  
角色型或功能安裝型=>下一步=>  
從伺服器集區選擇伺服器=>下一步=>  
Hyper-V 打勾=>新增功能=>(要等他跑一下)下一步=>  
先不用裝其他功能，下一步=>  
Hyper-V，不用動=>下一步=>  
把要用的網卡打勾(勾那張乙太網卡)，因為可能有多張實體網卡，要記錄一下用了哪一張=>  
移轉，不用勾，下一步=>  
預設存放區=>虛擬硬碟檔的位址&虛擬機器檔的位址 都改成 `D:\LAB1130306`=>下一步  
之後打勾=>否=>否則會馬上重新啟動=>安裝  
等他安裝=>關閉  
自己重新啟動電腦

重開後會斷網，因為現在對外網路由 Hyper-V產生的虛擬交換器接管，  
所以要找網路連線=>裡面的 vEthernet 外部 switch，去那裡重新設定 TCP/IP

## Hyper-V 管理員

檢查虛擬機器與硬碟的檔案要在同一個位置

### 虛擬交換器管理員

新增虛擬交換器  
剛剛Hyper-V自動新增的是外部的switch  
現在要新增一個內部虛擬交換器  
名稱隨意，下面記得勾內部

### 新增虛擬機器

先安裝 WindowsServer  
名稱設定為`SW`，  
位置預設是剛才選的資料夾`D:\LAB1130306`，存在不同的資料夾打勾，但是不要改路徑  
世代選第1代  
啟動記憶體`4096`，動態記憶體打勾  
網路功能網卡選剛才新增的內部網路  
建立虛擬硬碟，格式選新版的`vhdx`，才能避免電源中斷時資料損毀的問題  
位置他會自動產生  
大小選`127`GB，反正他是動態擴充  
不過固定大小的效能比較好  
安裝選項，勾從可開機 CD/DVD 那個, 映像檔(iso)選`D:\軟體\`下面找WindowsServer2022那個iso檔案  
下一步，完成
