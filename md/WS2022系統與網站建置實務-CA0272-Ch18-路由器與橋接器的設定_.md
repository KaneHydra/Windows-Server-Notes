# 路由器的原理

* 不同網路之間的電腦需透過路由器來溝通
  * Windows Server 2022路由器
* 甲網路的電腦1欲與丙網路的電腦6溝通
  * 電腦1會將資料傳送到路由器1
  * 路由器1將其轉送給路由器2
  * 路由器2將其傳送給丙網路內的電腦6
* 根據 __路由表__ 來決定傳送的途徑

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_0.png)

# 一般主機的路由表 - 1

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_1.png)

* 網路目的地\(Network Destination\)
  * 它可以是一個網路識別碼、一個IP位址、廣播地址或多點傳送地址等
* 網路遮罩\(Netmask\)
  * 也就是子網路遮罩\(subnet mask\)

# 一般主機的路由表 - 2

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_2.png)

* 閘道\(Gateway\)
  * 若“目的電腦IP位址  _AND_   __網路遮罩__ = __網路目的地__ ”→ 將資料傳送給其右邊 __閘道__ 處的IP位址
  * 若 “ __閘道__ = __在連結上__ ”→ 電腦1可以直接與目的電腦溝通，不需要透過路由器來轉送\(目的電腦與電腦1在同一個網路\)

---

在舊版Windows系統中並不會出現在連結上的字樣，而是電腦1自己的IP位址

# 一般主機的路由表 - 3

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_3.png)

* 介面\(Interface\)
  * 表示封包會從電腦1內擁有此IP 位址的介面送出
* 計量\(Metric\)
  * 表示透過此路徑來傳送資料的成本：傳送速度的快慢、封包從來源到目的地需要經過多少個路由器、此路徑的穩定性等
* 持續路由\(Persistent Routes\)
  * 表示此路徑是被儲存在登錄資料庫中，每次系統重新啟動時，都會自動設定此路徑

# 主機路由表解讀 - 1

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_4.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_5.png)

* 1號箭頭: __預設路徑 __ \(default route\)
  * 當電腦1要傳送封包時，若在路由表內找不到其他可以用來傳送此封包的路徑時，該封包就會透過 __預設路徑__ 來傳送
  * 封包會從IP位址為192\.168\.1\.1的 __介面__ 送出，然後送給IP位址為192\.168\.1\.254（路由器1的IP位址）的 __閘__  __道__
* 2號箭頭: __迴路網路路徑 __ \(loopback network route\)
  * 當電腦1要傳送封包給IP形式是127\. _x\.y\.z_ 的位址時，此封包會從IP位址為127\.0\.0\.1的 __介面__ 送給目的地，不需要透過路由器來轉送\(從 __閘道__ 處為 __在連結上__ 可知\)
  * IP位址127\.x\.y\.z是電腦內部使用的IP位址，透過127\.x\.y\.z位址讓電腦可以送封包給自己，一般是使用127\.0\.0\.1

# 主機路由表解讀 - 2

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_6.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_7.png)

* 3號箭頭: __直接連接的網路路徑__ \(directly\-attached network route\)
  * __直接連接的網路__ 就是指電腦1所在的網路\(192\.168\.1\.0\)
  * 此路徑表示當電腦1要傳送封包給此網路內的電腦時，該封包會從IP位址為192\.168\.1\.1的 __介面__ 送出，不需要透過路由器轉送\( __閘道__ 為 __在連結上__ \)
* 4號箭頭: __主機路徑 __ \(host route\)
  * 當電腦1要傳送封包到192\.168\.1\.1\(電腦1自己\)時，該封包會從IP位址為192\.168\.1\.1的 __介面__ 送出，然後傳送給自己，不需要透過路由器來轉送\( __閘道__ 為 __在連結上__ \)

# 主機路由表解讀 - 3

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_8.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_9.png)

* 5號箭頭: __子網路廣播路徑__ \(subnet broadcast route\)
  * 當電腦1要傳送封包給192\.168\.1\.255時\(也就是要廣播給192\.168\.1\.0這個網路內的所有電腦\)，該封包會透過IP位址為192\.168\.1\.1的 __介面__ 送出，不需要透過路由器\( __閘道__ 為 __在連結上__ \)
* 6號箭頭: __多點傳送路徑 __ \(multicast route\)
  * 電腦1要傳送 __多點傳送__ 的封包時，該封包會透過IP位址為192\.168\.1\.1的 __介面__ 送出，不需要透過路由器\( __閘道__ 為 __在連結上__ \)

# 主機路由表解讀 - 4

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_10.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_11.png)

* 7號箭頭: __有限廣播路徑 __ \(limited broadcast route\)
  * 當電腦1要傳送廣播封包到255\.255\.255\.255時，該封包會透過IP位址為192\.168\.1\.1的 __介面__ 送出，不需要透過路由器\( __閘道__ 為 __在連結上__ \)
  * 當您要傳送資料給255\.255\.255\.255時，此資料將被傳送給同一個實體網路內的所有電腦，也就是傳送給同一個子網路內網路識別碼相同的所有電腦

# 路由實例 - 1

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_12.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_13.png)

* 電腦1傳送給同一個網路內的電腦2 \(IP位址為192\.168\.1\.2\)
  * 電腦1會將192\.168\.1\.2 與路由表內的每一個路徑的  __網路遮罩 __ 執行邏輯 AND 運算
  * 192\.168\.1\.2  _AND_  3 號箭頭的255\.255\.255\.0 = 192\.168\.1\.0，因此會透過第3號箭頭的路徑來傳送封包
  * 從IP位址為192\.168\.1\.1的 __介面__ 送出，不需要透過路由器\( __閘道__ 為 __在連結上__ \)

# 多路徑可選的情況

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_14.png)

Q: 192\.168\.1\.2  _AND_  1號箭頭0\.0\.0\.0 = 0\.0\.0\.0，為何電腦1不選擇第1號箭頭的路徑來傳送封包呢?

A: 電腦1會選擇 __網路遮罩__ 中\(2進位\)，位元值為1的數目最多的路徑，第1號箭頭的 __網路遮罩__ 為0\.0\.0\.0\->0個，而第3號箭頭的 __網路遮罩__ 為255\.255\.255\.0\->24個，故會選擇第3號箭頭的路徑來傳送封包

# 路由實例 - 2

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_15.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_16.png)

* 電腦1傳送給丙網路內的電腦6 \(IP位址為192\.168\.3\.2\)
  * 電腦1會將192\.168\.3\.2與其路由表內的每一個路徑的 __網路遮罩 __ 執行邏輯  _AND_  運算
  * 192\.168\.3\.2  _AND_  1號箭頭的0\.0\.0\.0=0\.0\.0\.0，因此會透過第1號箭頭的路徑來傳送封包
  * 從IP位址為192\.168\.1\.1的 __介面__ 送出，然後傳送到 __閘道__ 欄位的192\.168\.1\.254\(路由器1的IP位址\)，再由路由器1根據其內的路由表來決定如何將封包傳送到電腦6

# 路由實例 - 3

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_17.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_18.png)

* 傳送廣播封包給192\.168\.1\.255
  * 將封包廣播給網路識別碼為192\.168\.1\.0的所有電腦
  * 電腦1會將192\.168\.1\.255與其路由表內的每一個路徑的  __網路遮罩 __ 執行邏輯  _AND_  運算
  * 192\.168\.1\.255  _AND_  5號箭頭的255\.255\.255\.255 = 192\.168\.1\.255
  * 從IP位址為192\.168\.1\.1的 __介面__ 送出，不需要透過路由器\( __閘道__ 為 __在連結上__ \)

# 路由實例 - 4

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_19.png)

* 若要傳送給甲網路內的電腦
  * 傳送給其預設閘道\(路由器1，IP位址192\.168\.2\.254\) → 甲網路內的電腦
* 若要傳送給乙網路內的電腦
  * 直接傳送給目的地電腦，不需要透過路由器
* 若要傳送給丙網路內的電腦
  * 傳送給其預設閘道\(路由器1，IP位址192\.168\.2\.254\) → 路由器1的預設閘道\(路由器2，IP位址192\.168\.2\.253\) → 丙網路內的電腦

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_20.png)

# 路由器的路由表

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_21.png)

# 計量值(metric)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_22.png)

* 兩個 __預設路徑__
  * 選擇 __網路遮罩__ 中位元值為1的數目最多的路徑
  * 選擇 __計量值__ 較低的路徑
    * 計量值:透過此路徑來傳送封包的成本，計量值越低表示此路徑越佳
    * 可自行設定 __計量__ 值，而且可以根據此路徑的速度快慢或穩定性等因素來決定其數值

# 自動計量

* 系統具備自動計算 __計量__ 值的功能
  * __路徑計量值__  __ = __  __介面計量值__  __ \+ __  __閘道計量值__
* __介面計量值__ :以網路介面的速度來計算
* Windows 11內若網路速度>=200Mbps且< 2Gb的話，則網路卡的預設 __介面計量值__ 為25
  * __閘道計量值__ 預設為256
  * 若有指定預設閘道的話，在路由表中 __預設路徑__ 的計量值為25 \+ 256 = 281

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_23.png)

---

Windows Server 2003等舊版系統的設定有所不同：閘道計量值就是路徑計量值，而閘道計量值預設會自動繼承介面計量值，不過您也可以自行設定每一個閘道的閘道計量值（不繼承介面計量值）。100 Mbps網路卡的預設介面計量值為20，而1 Gbps網路卡則為10

# 變更計量值

按Windows \+R鍵輸入control後按Enter鍵網路和網際網路網路和共用中心點擊 __變更介面卡設定__ 對著網路介面所代表的連線按右鍵內容Internet Protocol Version 4 \(TCP/IPv4\)內容進階

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_24.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_25.png)

# 自動偵測閘道

* 系統會自動偵測閘道是否正常，若因故無法透過排在清單前面的乙網路的閘道來傳送封包的話，系統會自動改使用排在後面的甲網路的閘道
* 系統是透過登錄參數  __DeadGWDetectDefault__  __ __ 來決定是否要自動偵測閘道正常與否:
  * __HKEY\_LOCAL\_MACHINE\\SYSTEM\\__  __CurrentControlSet__  __\\__
  * __ __  __  Services\\__  __Tcpip__  __\\Parameters__
  * 參數類型為REG\_DWORD
  * 1:要偵測，0:不偵測

# 設定Windows Server 2022路由器 - 1

* 設定路由器1、電腦1與電腦2的IP位址、預設閘道
* 利用ping指令來確認電腦1與路由器1、路由器1與電腦2相互之間都可以正常溝通
  * 先暫時將這3台電腦的 __Windows Defender__  __防火牆__ 關閉
  * 路由器1的路由功能尚未啟用，故電腦1與電腦2之間目前還無法溝通

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_26.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_27.png)

將 __乙太網路__ 與 __乙太網路__  __2__ 改為較有意義的名稱

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_28.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_29.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_30.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_31.png)

# 啟用Windows Server 2022路由器

完成設定後，可利用甲網路電腦1來ping乙網路電腦2\(先關閉 __Windows Defender__  __防火牆__ \)的方式來測試

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_32.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_33.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_34.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_35.png)

# 檢視路由表

與路由器直接連接的兩個網路路徑會自動建立在路由表內\(以路由器1為例\)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_36.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_37.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_38.png)

# 靜態路徑

* 靜態\(Static\)
  * 透過 __路由及遠端存取__ 主控台手動建立的路徑
* 網路管理\(Network Management\)
  * 利用其他方式手動建立的路徑，例如利用route add或在乙太網路的TCP/IP設定
* RIP
  * 利用RIP通訊協定從其他路由器學習得來的路徑
* 本機\(Local\)
  * 以上的情況之外

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_39.png)

# 新增靜態路徑範例圖 - 路由器1

* 若封包的目的地為甲網路內的電腦
  * 透過IP位址為192\.168\.1\.254的網路卡直接傳送給目的地電腦
* 若封包的目的地為乙網路內的電腦
  * 透過IP位址為192\.168\.2\.254的網路卡直接傳送給目的地電腦
* 若封包的目的地為丙網路內的電腦
  * 透過IP位址為192\.168\.1\.254的網路卡傳給預設閘道\(路由器2:192\.168\.1\.253\)，再由路由器2傳給目的地電腦
* 若封包的目的地為丁網路內的電腦
  * 透過IP位址為192\.168\.1\.254的網路卡來將其傳給預設閘道\(路由器2:192\.168\.1\.253\) 、路由器2會將此封包傳給其預設閘道192\.168\.1\.254\(路由器1\)，路由器1又會將其送給路由器2…，也就是在循環。可透過新增靜態路徑的方法來解決此問題

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_40.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_41.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_42.png)

# 新增靜態路徑 - 透過「路由及遠端存取」

路徑計量值 = 閘道計量值 \+ 介面計量值

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_43.png)

= 256 \+ 25

= 281

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_44.png)

# 新增靜態路徑 - 利用route add指令

* 假設圖中最右方還有一個192\.168\.5\.0的網路
  * 在路由器1內新增一筆192\.168\.5\.0的靜態路徑

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_45.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_46.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_47.png)

\*可以透過route delete指令來刪除路徑，例如 route delete 192\.168\.5\.0

# 篩選進出路由器的封包

例如可以透過 __輸入篩選器__ 讓路由器不接受由甲網路內的電腦所送來的ICMP封包

例如可以透過 __輸出篩選器__ 讓路由器不將 __遠端桌面__ 的封包送到乙網路

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_48.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_49.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_50.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_51.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_52.png)

# 輸入篩選器的設定

拒絕接受從甲網路來的 ICMP封包，不論此封包的目的地為乙或丙網路內的電腦\(假設只限制 __ICMP Echo Request__ 封包，它會拒絕ping指令\)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_53.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_54.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_55.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_56.png)

# 輸出篩選器的設定

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_57.png)

* 拒絕將與遠端桌面有關的封包傳送到乙網路
  * 甲丙網路無法利用 __遠端桌面連線__ 來與乙網路內的電腦溝通

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_58.png)

---

遠端桌面封包的連接埠號碼為3389

# 路由器的內建路徑

* 自動建立與路由器直接串接的網路路徑
  * 路由器1:往甲網路\(192\.168\.1\.0\)與乙網路\(192\.168\.2\.0\)的路徑
  * 路由器2:往乙網路\(192\.168\.2\.0\)與丙網路\(192\.168\.3\.0\)的路徑
* 非直接串接的網路路徑需要另外建立，例如丙網路並沒有直接連接到路由器1，需另外建立:
  * 靜態路徑:手動建立，會增加管理路由器的負擔
  * 動態路徑:使用RIP通訊協定自動建立

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_59.png)

閘道:0\.0\.0\.0表示是直接與路由器串接，也就是route print路由表中的 __在連結上__

# RIP路由器概述

* RIP路由器會將其路由表的路徑資料，通告給同一個網路的RIP路由器，這些路由器便會依據收到的路徑資料，來自動修正自己的路由表
* 所有RIP路由器在相互通告後，便都可以自動建立正確的路由表，不需要系統管理員來手動建立
* RIP路徑
  * 路由器1往丙網路的路徑\(192\.168\.3\.0\)
  * 路由器2往甲網路的路徑\(192\.168\.1\.0\)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_60.png)

# RIP路徑計量值

* __RIP__  __路徑計量值__  __ = __  __介面計量值__  __ \+ RIP__  __計量值__
* __介面計量值__ 是以網路介面的速度來計算
  * 例如Windows Server 2022內若網路速度>=200Mbps且< 2Gb的話，則網路卡的預設 __介面計量值__ 為25
* __RIP__  __計量值__ 是以封包傳送過程中所經過的路由器數量來計算
  * 每經過一個RIP路由器時，此路由器就會將 __RIP__  __計量值__ 加1
* Windows Server 2022 RIP路由器在將路徑通告給其他路由器時，會將所有非透過RIP學習來的路徑的 __RIP__  __計量值__ 固定為2

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_61.png)

* 若乙網路的 __介面計量值__ 為15的話，則路由器1的RIP路徑192\.168\.3\.0:
  * __RIP__  __路徑計量 __  __= __  __介面計量值 __  __\+ RIP__  __計量值 __  __= 15 \+ \(2\+1\) = 28__
  * 2:是路由器2所通告的計量值、1:代表路由器1自己

---

100 Mbps網路卡的預設為20、1000Mbps網路卡為10


# RIP的缺點

* 只適合於小中型的網路，無法擴展到大型或超大型的網路
  * RIP路由器所傳送的封包最多只可以經過15個路由器
  * 每一個RIP路由器定期的路徑通告動作，會影響網路的效率。這個通告動作是採用廣播\(broadcast\)或多點傳送\(multicast\)的方式
  * 當某個路由器的路徑有異動時\(例如某個網路斷線\)，雖然它會通告相鄰的其他路由器，再由這些路由器來通告給它們相鄰的路由器，但若網路較大時，這些新路徑資料可能很久才會通知到所有其他遠端的路由器，因而可能會造成路徑迴路\(routing loop\)的情況，以至於無法正常的在網路內傳送資料

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_62.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_63.png)

# 啟用RIP路由器

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_64.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_65.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_66.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_67.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_68.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_69.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_70.png)

# RIP路由介面的操作模式

* 週期更新模式\(Periodic update mode\)
  * 路由器會定期從此介面送出RIP通告訊息
  * 從其他路由器所學習來的路徑會因為路由器停止或重新啟動，而被從路由表內清除
* 自動靜態更新模式\(Auto\-static update mode\)
  * 其他路由器提出更新路徑資料的要求後，才會送出RIP通告訊息
  * 從其他路由器所學習來的路徑，並不會因路由器停止或重新啟動而被從路由表內清除，除非是被手動移除

# RIP連入、連出通訊協定設定

* 連出封包的通訊協定
  * RIP版本1廣播
  * RIP版本2廣播
  * RIP版本2多點傳送
  * 幕後RIP\(Silent RIP\)
* 連入封包的通訊協定
  * RIP 版本1及版本2
  * 只有RIP 版本1
  * 只有RIP 版本2
  * 略過連入的封包

# RIP路由介面的其他設定

* 增加路由的花費
  * RIP路由器收到其他路由器傳來的路徑資訊時，預設會自動將其 __RIP__  __計量值__ 增加1
  * 若同時有兩個網路介面可以將封包傳送到目的地，而您希望路由器能夠優先透過您所指定的介面來傳送的話，此時只要將另外一個網路介面的 __增加路由的花費__ 的數值增加即可
* 標記已宣告的路由
  * 將所有透過此介面送出的路徑都加上一個標記號碼，以便於系統管理員追蹤、管理用。此功能僅適用於RIP版本2
* 啟動驗證
  * 所有與這台RIP路由器相鄰的RIP路由器都必須設定相同的密碼\(1到16個字元\)，它們才會相互接受對方送來的RIP通告訊息
  * 密碼有大小寫之分。傳送密碼時是以明文方式來傳

# RIP路徑篩選

* 可以針對每一個RIP網路介面來設定
* 用來決定要將哪一些路徑通告給其他的 RIP路由器，或是要接受其他RIP路由器所送來的哪一些路徑
* 安全性標籤
  * __給輸入路由__ :篩選由其他RIP路由器所傳送來的路徑
  * __給輸出路由__ :篩選要通告給其他RIP路由器的路徑

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_71.png)

# 與相鄰路由器的互動設定

* RIP路由器預設會利用 __廣播__ 或 __多點傳送__ 的方式來將路徑資料通告給相鄰的RIP路由器
  * 可改為讓路由器以 __單點傳播__ 方式直接將RIP通告訊息傳送給指定的RIP路由器
  * 特別適用於RIP網路介面是連接到不支援廣播訊息的網路\(Frame Relay、X\.25、ATM\)，它讓RIP路由器以單點傳播的方式，透過這些網路將RIP通告訊息傳送給指定的RIP路由器

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_72.png)

# 將數個網路區段串接在一起

* 利用IP路由器
  * 設定比較麻煩，費用也比較高。路由器是在OSI模型中的第3層\(網路層\)運作
* 利用橋接器
  * 較經濟實惠，設定較簡單
  * 可以選購硬體橋接器
  * 也可以將Windows Server 2022伺服器設定為網路橋接器
  * 橋接器是在OSI模型中的第2層\(資料鏈結層\)

# 網路橋接器的設定

* 按著Ctrl鍵不放點選每一個欲包含在橋接器內的網路介面
  * __網際網路連線共用__ 的對外網路介面不可包含在橋接器內
* __Network Bridge__  __ __  __\(__  __網路橋接器__  __\)__ 的IP位址預設為自動取得
  * 不論橋接器的IP位址為何，都不會影響到其橋接功能
  * 其他電腦也可以來存取這台橋接器內的其他資源\( __Network Bridge__ 需擁有可以與其他電腦溝通的IP位址，必要時需自行設定 __Network Bridge__ 的IP位址\)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_73.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_74.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_75.png)

![](WS2022%E7%B3%BB%E7%B5%B1%E8%88%87%E7%B6%B2%E7%AB%99%E5%BB%BA%E7%BD%AE%E5%AF%A6%E5%8B%99-CA0272-Ch18-%E8%B7%AF%E7%94%B1%E5%99%A8%E8%88%87%E6%A9%8B%E6%8E%A5%E5%99%A8%E7%9A%84%E8%A8%AD%E5%AE%9A_76.png)

